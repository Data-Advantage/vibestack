# Configuration Files

This document outlines the essential configuration files needed for a Next.js 15+ and Supabase application with Tailwind CSS v4.

- [Environment Variables](#environment-variables)
- [Tailwind v4 CSS Setup](#tailwind-v4-css-setup)
- ...fill this in...

## Environment Variables

### .env.example

```
# Authentication Redirect URLs
NEXT_PUBLIC_SITE_URL=http://sara...s-ai.vercel.app
NEXT_PUBLIC_AUTH_REDIRECT_URL=http://sara...s-ai:3000/auth/callback

# Supabase Configuration (usually installed via Vercel-Supabase integration)
NEXT_PUBLIC_SUPABASE_URL=https://qify...dzxs.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJh...jyK8
SUPABASE_SERVICE_ROLE_KEY=eyJh...F12o
POSTGRES_URL=postgres://postgres.qjfy...dzxs:Pj7d...HWGT@aws-0-us-west-1.pooler.supabase.com:6543/postgres?sslmode=require&supa=base-pooler.x
POSTGRES_PRISMA_URL=postgres://postgres.qjfy...dzxs:Pj7d...HWGT@aws-0-us-west-1.pooler.supabase.com:6543/postgres?sslmode=require&supa=base-pooler.x
POSTGRES_URL_NON_POOLING=postgres://postgres.qjfy...dzxs:Pj7d...HWGT@aws-0-us-west-1.pooler.supabase.com:5432/postgres?sslmode=require
POSTGRES_USER=postgres
POSTGRES_PASSWORD=Pj7d...HWGT
POSTGRES_DATABASE=postgres
POSTGRES_HOST=db.qjfy...dzxs.supabase.co

# Stripe Integration (if applicable)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_51R6...ELpo
STRIPE_SECRET_KEY=sk_test_51R6...dxumE
STRIPE_WEBHOOK_SECRET=whsec_hb4D...R1Qq
NEXT_PUBLIC_STRIPE_PRICE_MONTHLY=price_1R6f...xgAYF
NEXT_PUBLIC_STRIPE_PRICE_YEARLY=price_1R6...fTPn
STRIPE_PRODUCT_ID=prod_S0gz...KxPU

# AI Integration (if applicable)
OPENAI_API_KEY=sk-MjR0...wX6C
GEMINI_API_KEY=AJza...ofog
```

## Tailwind v4 CSS Setup

### ./tailwind.config.ts (no longer necessary)

- No longer needed in Tailwind v4!
- New directives: @plugin and @source replace the need for configuration in tailwind.config.ts

### postcss.config.mjs

- Configure the Tailwind v4 plugin:

```js
const config = {
  plugins: {
    "@tailwindcss/postcss": {},
  },
};
export default config;
```

### app/globals.css

- Import Tailwind v4 CSS with `@import "tailwindcss";`
  - The old method in Tailwind v3 was `@tailwind base;`, `@tailwind components`, `@tailwind utilities` - this is no longer used in v4
  - old Tailwind v3 method `@layer base {}` is replaced by Tailwind v4 method `@theme`
- Use `@plugin` in v4
- Use `@oklch` in v4 to define colors
- Implement styling with utility classes
- Include CSS variables for theming that support shadcn/ui components
- Define light and dark theme color palettes
- Place in `app/` directory and import in root layout

```css
@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}
```

### app/layout.tsx

```
import type { Metadata } from "next";
import { Geist, Geist_Mono } from "next/font/google";
import "./globals.css";

const geistSans = Geist({
  variable: "--font-geist-sans",
  subsets: ["latin"],
});

const geistMono = Geist_Mono({
  variable: "--font-geist-mono",
  subsets: ["latin"],
});

export const metadata: Metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en">
      <body
        className={`${geistSans.variable} ${geistMono.variable} antialiased`}
      >
        {children}
      </body>
    </html>
  );
}
```

### app/page.tsx

```app/page.tsx
import Image from "next/image";

export default function Home() {
  return (
    <div className="grid grid-rows-[20px_1fr_20px] items-center justify-items-center min-h-screen p-8 pb-20 gap-16 sm:p-20 font-[family-name:var(--font-geist-sans)]">
      <main className="flex flex-col gap-[32px] row-start-2 items-center sm:items-start">
        <Image
          className="dark:invert"
          src="/next.svg"
          alt="Next.js logo"
          width={180}
          height={38}
          priority
        />
        <ol className="list-inside list-decimal text-sm/6 text-center sm:text-left font-[family-name:var(--font-geist-mono)]">
          <li className="mb-2 tracking-[-.01em]">
            Get started by editing{" "}
            <code className="bg-black/[.05] dark:bg-white/[.06] px-1 py-0.5 rounded font-[family-name:var(--font-geist-mono)] font-semibold">
              app/page.tsx
            </code>
            .
          </li>
          <li className="tracking-[-.01em]">
            Save and see your changes instantly.
          </li>
        </ol>

        <div className="flex gap-4 items-center flex-col sm:flex-row">
          <a
            className="rounded-full border border-solid border-transparent transition-colors flex items-center justify-center bg-foreground text-background gap-2 hover:bg-[#383838] dark:hover:bg-[#ccc] font-medium text-sm sm:text-base h-10 sm:h-12 px-4 sm:px-5 sm:w-auto"
            href="https://vercel.com/new?utm_source=create-next-app&utm_medium=appdir-template-tw&utm_campaign=create-next-app"
            target="_blank"
            rel="noopener noreferrer"
          >
            <Image
              className="dark:invert"
              src="/vercel.svg"
              alt="Vercel logomark"
              width={20}
              height={20}
            />
            Deploy now
          </a>
          <a
            className="rounded-full border border-solid border-black/[.08] dark:border-white/[.145] transition-colors flex items-center justify-center hover:bg-[#f2f2f2] dark:hover:bg-[#1a1a1a] hover:border-transparent font-medium text-sm sm:text-base h-10 sm:h-12 px-4 sm:px-5 w-full sm:w-auto md:w-[158px]"
            href="https://nextjs.org/docs?utm_source=create-next-app&utm_medium=appdir-template-tw&utm_campaign=create-next-app"
            target="_blank"
            rel="noopener noreferrer"
          >
            Read our docs
          </a>
        </div>
      </main>
      <footer className="row-start-3 flex gap-[24px] flex-wrap items-center justify-center">
        <a
          className="flex items-center gap-2 hover:underline hover:underline-offset-4"
          href="https://nextjs.org/learn?utm_source=create-next-app&utm_medium=appdir-template-tw&utm_campaign=create-next-app"
          target="_blank"
          rel="noopener noreferrer"
        >
          <Image
            aria-hidden
            src="/file.svg"
            alt="File icon"
            width={16}
            height={16}
          />
          Learn
        </a>
        <a
          className="flex items-center gap-2 hover:underline hover:underline-offset-4"
          href="https://vercel.com/templates?framework=next.js&utm_source=create-next-app&utm_medium=appdir-template-tw&utm_campaign=create-next-app"
          target="_blank"
          rel="noopener noreferrer"
        >
          <Image
            aria-hidden
            src="/window.svg"
            alt="Window icon"
            width={16}
            height={16}
          />
          Examples
        </a>
        <a
          className="flex items-center gap-2 hover:underline hover:underline-offset-4"
          href="https://nextjs.org?utm_source=create-next-app&utm_medium=appdir-template-tw&utm_campaign=create-next-app"
          target="_blank"
          rel="noopener noreferrer"
        >
          <Image
            aria-hidden
            src="/globe.svg"
            alt="Globe icon"
            width={16}
            height={16}
          />
          Go to nextjs.org â†’
        </a>
      </footer>
    </div>
  );
}
```

## Core Configuration Files

### ./next.config.js

- Configure image domains for external images (including Supabase)
- Add security headers
- Enable experimental features as needed
- Configure redirects and rewrites if necessary

```next.config.js
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  /* config options here */
};

export default nextConfig;
```

### ./tsconfig.json

- Use Next.js recommended TypeScript settings
- Set paths alias for easier imports (`@/*`)
- Include Next.js types
- Configure strict mode for better type safety

```tsconfig.json
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
```

### ./eslint.config.mjs

```eslint.config.mjs
import { dirname } from "path";
import { fileURLToPath } from "url";
import { FlatCompat } from "@eslint/eslintrc";

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

const compat = new FlatCompat({
  baseDirectory: __dirname,
});

const eslintConfig = [
  ...compat.extends("next/core-web-vitals", "next/typescript"),
];

export default eslintConfig;
```

### ./middleware.ts
- Implement authentication session refresh logic
- Configure route matching pattern to exclude static assets

## Environment Variables

### .env.example
- Supabase configuration:
  - `NEXT_PUBLIC_SUPABASE_URL`
  - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
  - `SUPABASE_SERVICE_ROLE_KEY` (for admin operations, not exposed to client)
- Application configuration:
  - `NEXT_PUBLIC_SITE_URL`
- Analytics integration (if applicable)

## Package Dependencies

### Key Dependencies
- **Core**: next, react, react-dom
- **Supabase**: @supabase/supabase-js, @supabase/ssr
- **UI**: tailwindcss, @tailwindcss/postcss, shadcn/ui components
- **Utilities**: zod, clsx, tailwind-merge
- **Notifications**: sonner (preferred over toast)

```package.json
{
  "name": "{{appname}}",
  "version": "{{0.1.0}}",
  "private": true,
  "scripts": {
    "dev": "next dev --turbopack",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  },
  "dependencies": {
    "react": "^19.0.0",
    "react-dom": "^19.0.0",
    "next": "15.2.4"
  },
  "devDependencies": {
    "typescript": "^5",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "@tailwindcss/postcss": "^4",
    "tailwindcss": "^4",
    "eslint": "^9",
    "eslint-config-next": "15.2.4",
    "@eslint/eslintrc": "^3"
  }
}
```

### Installation Steps
1. Install Next.js, React, and Supabase core dependencies
2. Install Tailwind CSS v4 and PostCSS
3. Initialize shadcn/ui with the "new-york" style
4. Add utility packages for form validation and class merging

Remember that specific versions and exact implementations will change over time. Focus on understanding the configuration principles rather than copying exact code snippets.

# Sitemap

Example code

```typescript:app/sitemap.ts
import { MetadataRoute } from 'next';

export default function sitemap(): MetadataRoute.Sitemap {
  // For static routes
  const staticRoutes = [
    {
      url: 'https://yourdomain.com',
      lastModified: new Date(),
      changeFrequency: 'daily',
      priority: 1,
    },
    {
      url: 'https://yourdomain.com/about',
      lastModified: new Date(),
      changeFrequency: 'monthly',
      priority: 0.8,
    },
    {
      url: 'https://yourdomain.com/pricing',
      lastModified: new Date(), 
      changeFrequency: 'weekly',
      priority: 0.9,
    },
    {
      url: 'https://yourdomain.com/contact',
      lastModified: new Date(),
      changeFrequency: 'monthly',
      priority: 0.7,
    },
  ];

  // For dynamic routes, you could fetch data here
  // Example (pseudo-code):
  // const blogPosts = await fetchBlogPosts();
  // const blogRoutes = blogPosts.map(post => ({
  //   url: `https://yourdomain.com/blog/${post.slug}`,
  //   lastModified: post.updatedAt,
  //   changeFrequency: 'weekly',
  //   priority: 0.8,
  // }));

  // Return all routes
  return [
    ...staticRoutes,
    // ...blogRoutes, // Uncomment when implemented
  ];
}
```

# Dark Mode / Theme Provider

## components/providers/theme-provider.tsx

```typescript
"use client"

import * as React from "react"
import { ThemeProvider as NextThemesProvider } from "next-themes"

export function ThemeProvider({
  children,
  ...props
}: React.ComponentProps<typeof NextThemesProvider>) {
  return <NextThemesProvider {...props}>{children}</NextThemesProvider>
}

```

## app/layout.tsx

```typescript
import { ThemeProvider } from "@/components/theme-provider"

export default function RootLayout({ children }: RootLayoutProps) {
  return (
    <>
      <html lang="en" suppressHydrationWarning>
        <head />
        <body>
          <ThemeProvider
            attribute="class"
            defaultTheme="system"
            enableSystem
            disableTransitionOnChange
          >
            {children}
          </ThemeProvider>
        </body>
      </html>
    </>
  )
}
```